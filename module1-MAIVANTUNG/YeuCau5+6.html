<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body onload="displayMainMenu()">
<script type="text/javascript" src="Custumer.js"></script>
<script type="text/javascript" src="Employee.js"></script>
<script>
    let arrlistCustumer = new Array();
    let arrlistEmployee = new Array();

    /**
     * function display main menu
     */
    function displayMainMenu() {
        document.write("----------main menu----------</br>" +
            "1 . Add new custumer.</br>" +
            "2 . Display Infomation Custumer.</br>" +
            "3 . Edit Information Custumer.</br>" +
            "4 . Delete Custumer.</br>" +
            "5 . Add new Employee.</br>" +
            "----------------------------------</br>");
        printArrCustumer(arrlistCustumer);
        window.addEventListener("keydown", selection)
    }

    /**
     * function selection
     */
    function selection(chosse) {
        switch (chosse.which) {
            case 49: {
                let custumer = new Custumer();
                addNewCustumer(custumer);
                arrlistCustumer.push(custumer);
                displayMainMenu();
            }
                break;
            case 50: {
                let num = Number.parseInt(prompt("select custumer you want show infomation"));
                arrlistCustumer[num].displayInfomationCustomer();
                displayMainMenu();
            }
                break;
            case 51: {
                let num = Number.parseInt(prompt("select custumer you want Edit infomation"));
                editCustomer(arrlistCustumer[num]);
                arrlistCustumer[num].displayInfomationCustomer();
                displayMainMenu();
            }
                break;
            case 52: {
                let num = Number.parseInt(prompt("select custumer you want delete"));
                arrlistCustumer.splice(num, 1);
                displayMainMenu();
            }
                break;
            case 53: {
                let employee = new Employee();
                addNewEmployee(employee);
                arrlistEmployee.push(employee);
                displayMainMenu();
            }
                break;
        }
    }

    /**
     * function add new custumer
     * @param custumer
     * @return custumer
     */
    function addNewCustumer(custumer) {
        let filteidcard = /^[0-9]{9}$/;
        let filteEmail = /^[a-z0-9sad]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/;
        let filteBirthday = /^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/;
        let filteDiscount = /^[0-9]{1,3}$/;
        let FilteNumberOfAccompanying = /^[0-9]{1,2}$/;
        let FilteRentday = /^[0-9]{1,4}$/;
        //-----------------------------------------------------
        custumer.setNameCustumer(prompt("enter name custumer"));
        do {
            custumer.setIdCard(prompt("Enter idcard:"));
        } while (!filteidcard.test(custumer.getIdCard()));
        do {
            custumer.setEmailCustumer(prompt("Enter Email:"));
        } while (!filteEmail.test(custumer.getEmailCustumer()));
        do {
            custumer.setBirthdayCustumer(prompt("Enter birthday Custumer:"));

        } while (!filteBirthday.test(custumer.getBirthdayCustumer()));
        ////////////////////////
        custumer.setAddress(prompt("Enter address:"));
        custumer.setTypeCustumer(prompt("Enter type custumer:"));
        //////////
        do {
            custumer.setDiscount(prompt("Enter disscount:"));
        } while (!filteDiscount.test(custumer.getDiscount()));
        /////////
        do {
            custumer.setNumberOfAccompanying(parseInt(prompt("Enter number of accompanying:")));
        } while (!FilteNumberOfAccompanying.test(custumer.getNumberOfAccompanying()));

        custumer.setTypeRoom(prompt("Enter  type room:"));
        ////////
        do {
            custumer.setRentday(parseInt(prompt("Enter rentday:")));
        } while (!FilteRentday.test(custumer.getRentday()));

        custumer.getSetTypeService(prompt("Enter type service:"));
        return custumer;
    }

    function editCustomer(custumer) {
        let filteidcard = /^[0-9]{9}$/;
        let filteEmail = /^[a-z0-9sad]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/;
        let filteBirthday = /^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/;
        let filteDiscount = /^[0-9]{1,3}$/;
        let FilteNumberOfAccompanying = /^[0-9]{1,2}$/;
        let FilteRentday = /^[0-9]{1,4}$/;
        //-----------------------------------------------------
        window.addEventListener("keydown", function (e) {
            switch (e.which) {
                case 49:
                    custumer.setNameCustumer(prompt("Enter name custumer:"));
                    break;
                case 50:
                    do {
                        custumer.idCard = prompt("Enter idcard:");
                    } while (!filteidcard.test(custumer.getIdCard()));
                    break;
                case 51:
                    do {
                        custumer.emailCustumer = prompt("Enter Email:");
                    } while (!filteEmail.test(custumer.getEmailCustumer()));
                    break;
                case 52:
                    do {
                        custumer.birthdayCustumer = prompt("Enter birthday Custumer:");

                    } while (!filteBirthday.test(custumer.getBirthdayCustumer()));
                    break;
                case 53:
                    custumer.setAddress(prompt("Enter address:"));
                    break;
                case 54:
                    custumer.setTypeCustumer(prompt("Enter type custumer:"));
                    break;
                case 55:
                    do {
                        custumer.disCount = prompt("Enter disscount:");
                    } while (!filteDiscount.test(custumer.getDiscount()));
                    break;
                case 56:
                    do {
                        custumer.numberOfAccompanying = parseInt(prompt("Enter number of accompanying:"));
                    } while (!FilteNumberOfAccompanying.test(custumer.getNumberOfAccompanying()));
                    break;
                case 57:
                    custumer.setTypeRoom(prompt("Enter  type room:"));
                    break;
                case 58:
                    do {
                        custumer.rentday = parseInt(prompt("Enter rentday:"));
                    } while (!FilteRentday.test(custumer.getRentday()));
                    break;
                case 59:
                    custumer.getSetTypeService(prompt("Enter type service:"));
                    break;
                default:
                    alert("ko thay gi ca");
            }
        });
        return custumer;
    }

    /**
     * function add new employee
     * @param employee
     * @return employee
     */
    function addNewEmployee(employee) {
        let filteidcard = /^[0-9]{9}$/;
        let filteEmail = /^[a-z0-9sad]{5,32}@[a-z0-9]{2,8}(\.[a-z0-9]{2,4}){1,2}$/;
        let filteBirthday = /^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/;
        let filtePhonenumber = /^[0-9]{10,11}$/;
        let FilteSalary = /^[0-9]{5,8}$/;
        //-----------------------------------------------------
        employee.setNameEmployee(prompt("Enter name employee:"));
        do {
            employee.setIDcard(prompt("Enter idcard:"));
        } while (!filteidcard.test(employee.getIDcard()));
        do {
            employee.setEmailEmployee(prompt("Enter Email:"));
        } while (!filteEmail.test(employee.getEmailEmployee()));
        do {
            employee.setBirthdayEmployee(prompt("Enter birthday employee:"));

        } while (!filteBirthday.test(employee.getBirthdayEmployee()));
        //////////
        employee.setRegency(prompt("Enter regency:"));
        employee.setLocaEmployee(prompt("Enter location:"));
        do {
            employee.setPhoneNumber(prompt("Enter type employee:"));
        } while (!filtePhonenumber.test(employee.getPhoneNumber()));
        do {
            employee.setSalary(prompt("Enter Salary:"));
        } while (!FilteSalary.test(employee.getSalary()));
        return employee;
    }

    /**
     * function print array custumer;
     * @param arr
     */
    function printArrCustumer(arr) {

        for (let i = 0; i < arr.length; i++) {
            document.write((i + 1) + ". Name: " + arr[i].nameCustumer + "ID: " + arr[i].idCard + "<br/>");
        }
    }

    function printArrEmployee(arr) {
        for (let i = 0; i < arr.length; i++) {
            document.write((i + 1) + ". Name: " + arr[i].nameCustumer + "ID: " + arr[i].idCard + "<br/>");
        }
    }

</script>
</body>
</html>